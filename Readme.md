# PVZ Service ‚Äî –°–µ—Ä–≤–∏—Å –ø—Ä–∏—ë–º–∫–∏ –∑–∞–∫–∞–∑–æ–≤ –≤ –ø—É–Ω–∫—Ç–∞—Ö –≤—ã–¥–∞—á–∏

–°–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ü–í–ó, –ø—Ä–∏—ë–º–∫–∞–º–∏ –∏ —Ç–æ–≤–∞—Ä–∞–º–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–æ–ª–∏ `moderator` –∏ `employee`, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Prometheus
–∏ Grafana.

---

## üìò API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (OpenAPI)

–ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è API –æ–ø–∏—Å–∞–Ω–∞ –≤ —Ñ–∞–π–ª–µ [`openapi.yaml`](swagger.yml)

### üîç –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å

- –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- –ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤ [Swagger Editor](https://editor.swagger.io)

---

## üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Go 1.24
- PostgreSQL
- Redis (–¥–ª—è JWT blacklisting)
- Gin (HTTP-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
- Prometheus + Grafana (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- Docker & Docker Compose

---

## üõ†Ô∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- –°–æ–∑–¥–∞–Ω–∏–µ –ü–í–ó (—Ç–æ–ª—å–∫–æ `moderator`)
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∫–∏ (—Ç–æ–ª—å–∫–æ `employee`)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ (LIFO)
- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏—ë–º–∫–∏
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ü–í–ó —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –¥–∞—Ç–µ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –º–µ—Ç—Ä–∏–∫–∏ Prometheus (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ä–æ–ª–∏:

- `moderator`
- `employee`

### üß™ –¢–µ—Å—Ç–æ–≤—ã–π –≤—Ö–æ–¥: `dummyLogin`

–î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–±–µ–∑ –ø–∞—Ä–æ–ª—è):

```http
POST /dummyLogin
Content-Type: application/json

{ "role": "moderator" }
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```markdown
- `pvz_created_total` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ü–í–ó
- `receptions_created_total` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏—ë–º–æ–∫
- `products_added_total` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- `http_requests_total` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- `http_request_duration_seconds` ‚Äî –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
```

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è **Docker** –∏ **Docker Compose**.

```bash
git clone https://github.com/ne4chelovek/pvz
cd pvz
docker-compose up --build -d
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã:

- API: http://localhost:8080
- –ú–µ—Ç—Ä–∏–∫–∏: http://localhost:9000/metrics
- Prometheus: http://localhost:9090
- Grafana: http://localhost:3000 (–ª–æ–≥–∏–Ω: admin, –ø–∞—Ä–æ–ª—å: admin)

–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ: 
- https://github.com/avito-tech/tech-internship/blob/main/Tech%20Internships/Backend/Backend-trainee-assignment-spring-2025/Backend-trainee-assignment-spring-2025.md
